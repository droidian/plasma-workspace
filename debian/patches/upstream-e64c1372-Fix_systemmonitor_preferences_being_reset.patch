From e64c13729bd1e2de43689b310caafac62f748c87 Mon Sep 17 00:00:00 2001
From: Alexander Lohnau <alexander.lohnau@gmx.de>
Date: Wed, 3 Aug 2022 19:28:04 +0200
Subject: [PATCH] Fix systemmonitor preferences being reset

See https://invent.kde.org/frameworks/plasma-framework/-/commit/3078bc25dfe49bb627ae9a65cd18020054a5950e#note_497421

BUG: 454004


(cherry picked from commit 262bf0af8479f04fdbc41e4c8c2a11dcd403564f)
---
 applets/systemmonitor/systemmonitor/systemmonitor.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/applets/systemmonitor/systemmonitor/systemmonitor.cpp b/applets/systemmonitor/systemmonitor/systemmonitor.cpp
index 5c92cc404..329f6b242 100644
--- a/applets/systemmonitor/systemmonitor/systemmonitor.cpp
+++ b/applets/systemmonitor/systemmonitor/systemmonitor.cpp
@@ -86,6 +86,6 @@ void SystemMonitor::openSystemMonitor()
     job->start();
 }
 
-K_PLUGIN_CLASS(SystemMonitor)
+K_PLUGIN_CLASS_WITH_JSON(SystemMonitor, "package/metadata.json")
 
 #include "systemmonitor.moc"
-- 
GitLab

